import{e as j,a8 as h,r as l,T as v,c as w,j as t,ag as b,ah as I,a7 as c,ai as N,aj as T,ak as D,al as L}from"./index-CDaNxsL8.js";import{G as R,g as E}from"./general-settings-Input-elements-a-qneQzO.js";import{u as A}from"./useTranslation-B38PE0UZ.js";const O=()=>{const u=j(),d=h(),{t:n}=A("new-settings"),r=l.useContext(v),p=w(o=>o.lists),g=l.useRef(null),f=l.useRef(null),m=l.useRef(null),s={titleInput:g,descInput:f,orderInput:m},x=o=>{o.preventDefault();const y=E(r,s),e={...r,...y},a=b(e.title),S=I(p).includes(a);if(!a||S){let i=n("title-already-exists");a||(i=n("title-is-invalid")),s.titleInput.current!==null&&(s.titleInput.current.focus(),s.titleInput.current.classList.add("is-invalid")),c.error(t.jsxs("p",{children:[n("could-not-add-new-list"),t.jsx("br",{}),i]}))}else{e.type=a,e.orderByDate?e.settings=N:e.settings=T;const i={...e,items:[]};s.titleInput.current!==null&&s.titleInput.current.classList.remove("is-invalid"),D(i)?(u(L(i)),c.info("New list added"),d("/?type="+e.type)):c.error("Could not add list")}};return t.jsx("div",{className:"date-settings",children:t.jsxs("form",{className:"app-form",onSubmit:x,children:[t.jsx("h1",{children:n("add-new-list")}),t.jsxs("div",{className:"form-group",children:[t.jsx(R,{refs:s,newSetting:!0,settings:r}),t.jsx("div",{className:"form-section",children:t.jsx("button",{type:"submit",className:"btn btn-primary","aria-label":n("add-new-list"),children:n("add-new-list")})})]})]})})};export{O as default};
