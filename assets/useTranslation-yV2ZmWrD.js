import{r as f,aa as F,ab as M}from"./index-oD98G8_M.js";const U=(e,s,a,n)=>{var t,d,w,p;const i=[a,{code:s,...n||{}}];if((d=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&d.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);m(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(p=(w=e==null?void 0:e.services)==null?void 0:w.logger)!=null&&p.warn?e.services.logger.warn(...i):console!=null&&console.warn},L={},E=(e,s,a,n)=>{m(a)&&L[a]||(m(a)&&(L[a]=new Date),U(e,s,a,n))},P=(e,s)=>()=>{if(e.isInitialized)s();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),s()};e.on("initialized",a)}},C=(e,s,a)=>{e.loadNamespaces(s,P(e,a))},A=(e,s,a,n)=>{if(m(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(s)>-1)return C(e,a,n);a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(s,P(e,n))},_=(e,s,a={})=>!s.languages||!s.languages.length?(E(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(e,{lng:a.lng,precheck:(n,i)=>{var t;if(((t=a.bindI18n)==null?void 0:t.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,e))return!1}}),m=e=>typeof e=="string",G=e=>typeof e=="object"&&e!==null,$=f.createContext();class J{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const W=(e,s)=>{const a=f.useRef();return f.useEffect(()=>{a.current=e},[e,s]),a.current},j=(e,s,a,n)=>e.getFixedT(s,a,n),X=(e,s,a,n)=>f.useCallback(j(e,s,a,n),[e,s,a,n]),q=(e,s={})=>{var O,R,v,z;const{i18n:a}=s,{i18n:n,defaultNS:i}=f.useContext($)||{},t=a||n||F();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new J),!t){E(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=(u,l)=>m(l)?l:G(l)&&m(l.defaultValue)?l.defaultValue:Array.isArray(u)?u[u.length-1]:u,c=[o,{},!1];return c.t=o,c.i18n={},c.ready=!1,c}(O=t.options.react)!=null&&O.wait&&E(t,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...M(),...t.options.react,...s},{useSuspense:w,keyPrefix:p}=d;let r=e||i||((R=t.options)==null?void 0:R.defaultNS);r=m(r)?[r]:r||["translation"],(z=(v=t.reportNamespaces).addUsedNamespaces)==null||z.call(v,r);const g=(t.isInitialized||t.initializedStoreOnce)&&r.every(o=>_(o,t,d)),k=X(t,s.lng||null,d.nsMode==="fallback"?r:r[0],p),S=()=>k,x=()=>j(t,s.lng||null,d.nsMode==="fallback"?r:r[0],p),[b,h]=f.useState(S);let y=r.join();s.lng&&(y=`${s.lng}${y}`);const I=W(y),N=f.useRef(!0);f.useEffect(()=>{const{bindI18n:o,bindI18nStore:c}=d;N.current=!0,!g&&!w&&(s.lng?A(t,s.lng,r,()=>{N.current&&h(x)}):C(t,r,()=>{N.current&&h(x)})),g&&I&&I!==y&&N.current&&h(x);const u=()=>{N.current&&h(x)};return o&&(t==null||t.on(o,u)),c&&(t==null||t.store.on(c,u)),()=>{N.current=!1,t&&(o==null||o.split(" ").forEach(l=>t.off(l,u))),c&&t&&c.split(" ").forEach(l=>t.store.off(l,u))}},[t,y]),f.useEffect(()=>{N.current&&g&&h(S)},[t,p,g]);const T=[b,t,g];if(T.t=b,T.i18n=t,T.ready=g,g||!g&&!w)return T;throw new Promise(o=>{s.lng?A(t,s.lng,r,()=>o()):C(t,r,()=>o())})};export{$ as I,U as a,G as b,m as i,q as u,E as w};
