import{B as m,r as l,j as s,e as J,T as Q,L as Z,i as ee,f as te,a7 as z}from"./index-_4ZB8lTO.js";import{G as ne,g as re}from"./general-settings-Input-elements-BlHvbvPI.js";import{u as ae}from"./useTranslation-CSL3NNR0.js";import{T as oe}from"./Trans-BNx0YWdc.js";function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){if(e==null)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(a[n]=e[n]);return a}function S(e){var t=l.useRef(e),n=l.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var R=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},E=function(e){return"touches"in e},H=function(e){return e&&e.ownerDocument.defaultView||self},q=function(e,t,n){var r=e.getBoundingClientRect(),a=E(t)?function(o,c){for(var i=0;i<o.length;i++)if(o[i].identifier===c)return o[i];return o[0]}(t.touches,n):t;return{left:R((a.pageX-(r.left+H(e).pageXOffset))/r.width),top:R((a.pageY-(r.top+H(e).pageYOffset))/r.height)}},A=function(e){!E(e)&&e.preventDefault()},Y=m.memo(function(e){var t=e.onMove,n=e.onKey,r=L(e,["onMove","onKey"]),a=l.useRef(null),o=S(t),c=S(n),i=l.useRef(null),u=l.useRef(!1),f=l.useMemo(function(){var y=function(h){A(h),(E(h)?h.touches.length>0:h.buttons>0)&&a.current?o(q(a.current,h,i.current)):b(!1)},_=function(){return b(!1)};function b(h){var d=u.current,g=H(a.current),k=h?g.addEventListener:g.removeEventListener;k(d?"touchmove":"mousemove",y),k(d?"touchend":"mouseup",_)}return[function(h){var d=h.nativeEvent,g=a.current;if(g&&(A(d),!function(F,N){return N&&!E(F)}(d,u.current)&&g)){if(E(d)){u.current=!0;var k=d.changedTouches||[];k.length&&(i.current=k[0].identifier)}g.focus(),o(q(g,d,i.current)),b(!0)}},function(h){var d=h.which||h.keyCode;d<37||d>40||(h.preventDefault(),c({left:d===39?.05:d===37?-.05:0,top:d===40?.05:d===38?-.05:0}))},b]},[c,o]),v=f[0],C=f[1],x=f[2];return l.useEffect(function(){return x},[x]),m.createElement("div",j({},r,{onTouchStart:v,onMouseDown:v,className:"react-colorful__interactive",ref:a,onKeyDown:C,tabIndex:0,role:"slider"}))}),B=function(e){return e.filter(Boolean).join(" ")},$=function(e){var t=e.color,n=e.left,r=e.top,a=r===void 0?.5:r,o=B(["react-colorful__pointer",e.className]);return m.createElement("div",{className:o,style:{top:100*a+"%",left:100*n+"%"}},m.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},p=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},se=function(e){return fe(O(e))},O=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?p(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?p(parseInt(e.substring(6,8),16)/255,2):1}},le=function(e){return ue(ie(e))},ce=function(e){var t=e.s,n=e.v,r=e.a,a=(200-t)*n/100;return{h:p(e.h),s:p(a>0&&a<200?t*n/100/(a<=100?a:200-a)*100:0),l:p(a/2),a:p(r,2)}},P=function(e){var t=ce(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},ie=function(e){var t=e.h,n=e.s,r=e.v,a=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),c=r*(1-n),i=r*(1-(t-o)*n),u=r*(1-(1-t+o)*n),f=o%6;return{r:p(255*[r,i,c,c,u,r][f]),g:p(255*[u,r,r,i,c,c][f]),b:p(255*[c,c,u,r,r,i][f]),a:p(a,2)}},M=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ue=function(e){var t=e.r,n=e.g,r=e.b,a=e.a,o=a<1?M(p(255*a)):"";return"#"+M(t)+M(n)+M(r)+o},fe=function(e){var t=e.r,n=e.g,r=e.b,a=e.a,o=Math.max(t,n,r),c=o-Math.min(t,n,r),i=c?o===t?(n-r)/c:o===n?2+(r-t)/c:4+(t-n)/c:0;return{h:p(60*(i<0?i+6:i)),s:p(o?c/o*100:0),v:p(o/255*100),a}},de=m.memo(function(e){var t=e.hue,n=e.onChange,r=B(["react-colorful__hue",e.className]);return m.createElement("div",{className:r},m.createElement(Y,{onMove:function(a){n({h:360*a.left})},onKey:function(a){n({h:R(t+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":p(t),"aria-valuemax":"360","aria-valuemin":"0"},m.createElement($,{className:"react-colorful__hue-pointer",left:t/360,color:P({h:t,s:100,v:100,a:1})})))}),he=m.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:P({h:t.h,s:100,v:100,a:1})};return m.createElement("div",{className:"react-colorful__saturation",style:r},m.createElement(Y,{onMove:function(a){n({s:100*a.left,v:100-100*a.top})},onKey:function(a){n({s:R(t.s+100*a.left,0,100),v:R(t.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+p(t.s)+"%, Brightness "+p(t.v)+"%"},m.createElement($,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:P(t)})))}),U=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},me=function(e,t){return e.toLowerCase()===t.toLowerCase()||U(O(e),O(t))};function ve(e,t,n){var r=S(n),a=l.useState(function(){return e.toHsva(t)}),o=a[0],c=a[1],i=l.useRef({color:t,hsva:o});l.useEffect(function(){if(!e.equal(t,i.current.color)){var f=e.toHsva(t);i.current={hsva:f,color:t},c(f)}},[t,e]),l.useEffect(function(){var f;U(o,i.current.hsva)||e.equal(f=e.fromHsva(o),i.current.color)||(i.current={hsva:o,color:f},r(f))},[o,e,r]);var u=l.useCallback(function(f){c(function(v){return Object.assign({},v,f)})},[]);return[o,u]}var pe=typeof window<"u"?l.useLayoutEffect:l.useEffect,ge=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},V=new Map,xe=function(e){pe(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!V.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,V.set(t,n);var r=ge();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},be=function(e){var t=e.className,n=e.colorModel,r=e.color,a=r===void 0?n.defaultColor:r,o=e.onChange,c=L(e,["className","colorModel","color","onChange"]),i=l.useRef(null);xe(i);var u=ve(n,a,o),f=u[0],v=u[1],C=B(["react-colorful",t]);return m.createElement("div",j({},c,{ref:i,className:C}),m.createElement(he,{hsva:f,onChange:v}),m.createElement(de,{hue:f.h,onChange:v,className:"react-colorful__last-control"}))},Ce={defaultColor:"000",toHsva:se,fromHsva:function(e){return le({h:e.h,s:e.s,v:e.v,a:1})},equal:me},ye=function(e){return m.createElement(be,j({},e,{colorModel:Ce}))},_e=/^#?([0-9A-F]{3,8})$/i,ke=function(e){var t=e.color,n=t===void 0?"":t,r=e.onChange,a=e.onBlur,o=e.escape,c=e.validate,i=e.format,u=e.process,f=L(e,["color","onChange","onBlur","escape","validate","format","process"]),v=l.useState(function(){return o(n)}),C=v[0],x=v[1],y=S(r),_=S(a),b=l.useCallback(function(d){var g=o(d.target.value);x(g),c(g)&&y(u?u(g):g)},[o,u,c,y]),h=l.useCallback(function(d){c(d.target.value)||x(o(n)),_(d)},[n,o,c,_]);return l.useEffect(function(){x(o(n))},[n,o]),m.createElement("input",j({},f,{value:i?i(C):C,spellCheck:"false",onChange:b,onBlur:h}))},G=function(e){return"#"+e},we=function(e){var t=e.prefixed,n=e.alpha,r=L(e,["prefixed","alpha"]),a=l.useCallback(function(c){return c.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),o=l.useCallback(function(c){return function(i,u){var f=_e.exec(i),v=f?f[1].length:0;return v===3||v===6||!!u&&v===4||!!u&&v===8}(c,n)},[n]);return m.createElement(ke,j({},r,{escape:a,format:t?G:void 0,process:G,validate:o}))};const je=e=>{l.useEffect(()=>{let t=!1,n=!1;const r=o=>{t||!n||!e.ref.current||e.ref.current.contains(o.target)||e.handler(o)},a=o=>{n=!!e.ref.current,t=!!(e.ref.current&&e.ref.current.contains(o.target))};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),document.addEventListener("click",r),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a),document.removeEventListener("click",r)}},[e.ref,e.handler])},X=e=>{const t=l.useRef(null),[n,r]=l.useState(!1),a=l.useCallback(()=>r(!1),[]),o=u=>{!n&&["Enter"," ","Spacebar","Tab"].includes(u.key)&&r(!0),n&&u.key==="Escape"&&r(!1)},c=u=>{n&&u.key==="Escape"&&r(!1)},i=u=>{u.currentTarget.contains(u.relatedTarget)||r(!1)};return je({ref:t,handler:a}),s.jsxs("div",{className:"picker",children:[s.jsx("div",{className:"swatch",tabIndex:0,onKeyDown:o,style:{backgroundColor:e.color},onClick:()=>r(!0)}),n&&s.jsxs("div",{className:"color-popover",ref:t,onBlur:i,onKeyDown:c,children:[s.jsx(ye,{color:e.color,onChange:e.onChange}),s.jsxs("label",{className:"color-input-label",children:[s.jsx("span",{className:"sr-only",children:"Hexadecimal color code"}),s.jsx("span",{children:"#"}),s.jsx(we,{color:e.color,onChange:e.onChange})]})]})]})},Re=()=>{const e=J(),{t}=ae("date-settings"),n=l.useContext(Q),[r,a]=l.useState(n.settings.pastDateColor),[o,c]=l.useState(n.settings.todayDateColor);let i=t("settings"),u=t("update-settings");const f=l.useRef(null),v=l.useRef(null),C=l.useRef(null),x=l.useRef(null),y=l.useRef(null),_=l.useRef(null),b=l.useRef(null),h=l.useRef(null),d={titleInput:f,descInput:v,orderInput:C},g=k=>{k.preventDefault();const F=re(n,d),N={...n,...F},w={showRelativeDate:y,showDate:x,dateFormat:_,usePastDateColor:b,useTodayDateColor:h};Object.keys(w).forEach(function(T){const D=w[T];let I=N.settings[T];["showDate","showRelativeDate","usePastDateColor","useTodayDateColor"].includes(T)?D.current&&(I=D.current.checked):D.current&&(I=D.current.value.trim(),D.current.value=I),w[T]=I}),w.pastDateColor=r,w.todayDateColor=o;const W={...N.settings,...w},K={...N,settings:W};ee(K)?(e(te(K)),z.info(t("settings-updated"))):z.error(t("could-not-update-settings"))};return s.jsx("div",{className:"date-settings",children:s.jsxs("form",{className:"app-form",onSubmit:g,children:[s.jsx("h1",{children:i}),s.jsx("p",{children:s.jsxs(oe,{t,i18nKey:"settings-for-list",values:{list:n.title},children:["Settings for list: ",s.jsx(Z,{to:"/?type="+n.type,children:"list"})]})}),s.jsxs("div",{className:"form-group",children:[s.jsx(ne,{refs:d,newSetting:!1,settings:n}),s.jsxs("div",{className:"date-settings",children:[s.jsxs("div",{className:"form-section",children:[s.jsx("p",{className:"form-label",children:t("date-options")}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{ref:y,id:"showRelativeDate",name:"relativeDate",type:"checkbox",className:"form-check-input",defaultChecked:n.settings.showRelativeDate}),s.jsx("label",{htmlFor:"showRelativeDate",className:"form-check-label",children:t("show-relative-dates-eg-in-2-days")})]}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{ref:x,id:"showDate",name:"date",type:"checkbox",className:"form-check-input",defaultChecked:n.settings.showDate}),s.jsx("label",{htmlFor:"showDate",className:"form-check-label",children:t("show-dates-with-date-format-below")})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("label",{htmlFor:"dateFormat",className:"form-label",children:t("date-format")}),s.jsx("input",{ref:_,id:"dateFormat",name:"dateFormat",defaultValue:n.settings.dateFormat,type:"text",className:"form-control","aria-describedby":"formatHelp"}),s.jsxs("small",{id:"formatHelp",className:"form-text text-muted",children:[t("example-format-ddmmyyyy")," ",s.jsx("a",{href:"https://day.js.org/docs/en/display/format",children:t("list-of-all-available-formats")})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-check",children:[s.jsx("input",{ref:b,id:"usePastDateColor",name:"usePastDateColor",type:"checkbox",className:"form-check-input",defaultChecked:n.settings.usePastDateColor}),s.jsxs("div",{className:"label-color-picker",children:[s.jsx("label",{htmlFor:"usePastDateColor",className:"form-check-label",children:t("text-color-for-list-items-with-a-past-date")}),s.jsx(X,{color:r,onChange:a})]})]}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{ref:h,id:"useTodayDateColor",name:"useTodayDateColor",type:"checkbox",className:"form-check-input",defaultChecked:n.settings.useTodayDateColor}),s.jsxs("div",{className:"label-color-picker",children:[s.jsx("label",{htmlFor:"useTodayDateColor",className:"form-check-label",children:t("text-color-for-list-items-with-todays-date")}),s.jsx(X,{color:o,onChange:c})]})]})]})]}),s.jsx("div",{className:"form-section",children:s.jsx("button",{type:"submit",className:"btn btn-primary","aria-label":"Update settings",children:u})})]})]})})};export{Re as default};
