import{c as j,a5 as h,r as l,T as b,b as v,j as t,af as w,ag as I,a4 as c,ah as N,ai as T,aj as D,ak as L}from"./index-oD98G8_M.js";import{G as R,g as E}from"./general-settings-Input-elements-BeQOI9ZN.js";import{u as A}from"./useTranslation-yV2ZmWrD.js";const O=()=>{const u=j(),d=h(),{t:n}=A("new-settings"),r=l.useContext(b),p=v(o=>o.lists),g=l.useRef(null),f=l.useRef(null),m=l.useRef(null),s={titleInput:g,descInput:f,orderInput:m},x=o=>{o.preventDefault();const y=E(r,s),e={...r,...y},a=w(e.title),S=I(p).includes(a);if(!a||S){let i=n("title-already-exists");a||(i=n("title-is-invalid")),s.titleInput.current!==null&&(s.titleInput.current.focus(),s.titleInput.current.classList.add("is-invalid")),c.error(t.jsxs("p",{children:[n("could-not-add-new-list"),t.jsx("br",{}),i]}))}else{e.type=a,e.orderByDate?e.settings=N:e.settings=T;const i={...e,items:[]};s.titleInput.current!==null&&s.titleInput.current.classList.remove("is-invalid"),D(i)?(u(L(i)),c.info("New list added"),d("/?type="+e.type)):c.error("Could not add list")}};return t.jsx("div",{className:"date-settings",children:t.jsxs("form",{className:"app-form",onSubmit:x,children:[t.jsx("h1",{children:n("add-new-list")}),t.jsxs("div",{className:"form-group",children:[t.jsx(R,{refs:s,newSetting:!0,settings:r}),t.jsx("div",{className:"form-section",children:t.jsx("button",{type:"submit",className:"btn btn-primary","aria-label":n("add-new-list"),children:n("add-new-list")})})]})]})})};export{O as default};
